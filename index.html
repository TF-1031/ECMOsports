<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ECMO Volleyball Scoreboard</title>

<style>
body {
    margin:0;
    font-family: Arial, sans-serif;
    background:#111;
    color:white;
}

/* ================= OBS MODE ================= */

.obs .scoreboard {
    position:absolute;
    bottom:0;
    width:100%;
    height:180px;
    background:rgba(0,0,0,0.85);
    display:flex;
    justify-content:space-between;
    align-items:center;
    padding:20px 80px;
    box-sizing:border-box;
}

.obs .team-name { font-size:36px; }
.obs .score { font-size:110px; }
.obs .sets { font-size:20px; }
.obs .set-label { font-size:26px; }

.obs .controls,
.obs .name-edit { display:none; }

/* ================= MOBILE MODE ================= */

.mobile .scoreboard {
    display:flex;
    flex-direction:column;
    align-items:center;
    padding-top:20px;
}

.mobile .team {
    margin:20px 0;
    text-align:center;
}

.mobile .team-name { font-size:28px; }
.mobile .score { font-size:90px; }
.mobile .sets { font-size:18px; }

.mobile .set-label {
    font-size:24px;
    margin-top:10px;
}

.name-edit {
    padding:15px;
    text-align:center;
}

.name-edit input {
    width:45%;
    padding:10px;
    margin:5px;
    border-radius:6px;
    border:none;
}

.controls {
    width:100%;
    position:fixed;
    bottom:0;
    background:#000;
    padding:20px;
    box-sizing:border-box;
}

button {
    width:30%;
    padding:14px;
    margin:6px 1%;
    font-size:18px;
    border:none;
    border-radius:8px;
}

.btnA { background:#1e90ff; }
.btnB { background:#ff3b3b; }
.btnNeutral { background:#555; }

.row {
    display:flex;
    justify-content:space-between;
}

.scoreboard { display:none; }

</style>
</head>

<body>

<div class="name-edit">
    <input type="text" id="teamANameInput" placeholder="Home Team">
    <input type="text" id="teamBNameInput" placeholder="Away Team">
    <button class="btnNeutral" onclick="saveTeamNames()">Save Names</button>
</div>

<div class="scoreboard">
    <div class="team">
        <div class="team-name" id="teamAName">HOME</div>
        <div class="score" id="teamAScore">0</div>
        <div class="sets">Sets: <span id="teamASets">0</span></div>
    </div>

    <div class="center">
        <div class="set-label">SET <span id="currentSet">1</span> / 5</div>
    </div>

    <div class="team">
        <div class="team-name" id="teamBName">AWAY</div>
        <div class="score" id="teamBScore">0</div>
        <div class="sets">Sets: <span id="teamBSets">0</span></div>
    </div>
</div>

<div class="controls">
    <div class="row">
        <button class="btnA" onclick="changeScore('A',1)">HOME +1</button>
        <button class="btnB" onclick="changeScore('B',1)">AWAY +1</button>
    </div>
    <div class="row">
        <button class="btnA" onclick="changeScore('A',-1)">HOME -1</button>
        <button class="btnB" onclick="changeScore('B',-1)">AWAY -1</button>
    </div>
    <div class="row">
        <button class="btnA" onclick="changeSets('A',1)">HOME +SET</button>
        <button class="btnB" onclick="changeSets('B',1)">AWAY +SET</button>
    </div>
    <div class="row">
        <button class="btnNeutral" onclick="nextSet()">Next Set</button>
        <button class="btnNeutral" onclick="resetSets()">Reset Sets</button>
    </div>
    <div class="row">
        <button class="btnNeutral" onclick="resetScores()">Reset Points</button>
    </div>
</div>

<script>

/* Mode Detection */
if (window.location.search.includes("obs")) {
    document.body.classList.add("obs");
} else {
    document.body.classList.add("mobile");
}
document.querySelector(".scoreboard").style.display = "flex";

/* Score State */
let state = JSON.parse(localStorage.getItem("vbScore")) || {
    teamA: 0,
    teamB: 0,
    setsA: 0,
    setsB: 0,
    currentSet: 1,
    teamAName: "HOME",
    teamBName: "AWAY"
};

function updateDisplay() {
    document.getElementById("teamAScore").innerText = state.teamA;
    document.getElementById("teamBScore").innerText = state.teamB;
    document.getElementById("teamASets").innerText = state.setsA;
    document.getElementById("teamBSets").innerText = state.setsB;
    document.getElementById("currentSet").innerText = state.currentSet;
    document.getElementById("teamAName").innerText = state.teamAName;
    document.getElementById("teamBName").innerText = state.teamBName;
    localStorage.setItem("vbScore", JSON.stringify(state));
}

function changeScore(team, amount) {
    if(team === "A") state.teamA = Math.max(0, state.teamA + amount);
    if(team === "B") state.teamB = Math.max(0, state.teamB + amount);
    updateDisplay();
}

function changeSets(team, amount) {
    if(team === "A") state.setsA = Math.min(5, state.setsA + amount);
    if(team === "B") state.setsB = Math.min(5, state.setsB + amount);
    updateDisplay();
}

function nextSet() {
    if(state.currentSet < 5) {
        state.currentSet++;
        state.teamA = 0;
        state.teamB = 0;
        updateDisplay();
    }
}

function resetScores() {
    state.teamA = 0;
    state.teamB = 0;
    updateDisplay();
}

function resetSets() {
    state.setsA = 0;
    state.setsB = 0;
    state.currentSet = 1;
    updateDisplay();
}

function saveTeamNames() {
    const a = document.getElementById("teamANameInput").value.trim();
    const b = document.getElementById("teamBNameInput").value.trim();
    if(a) state.teamAName = a;
    if(b) state.teamBName = b;
    updateDisplay();
}

updateDisplay();

</script>

</body>
</html>
